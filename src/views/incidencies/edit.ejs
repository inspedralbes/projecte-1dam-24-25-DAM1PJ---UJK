<%- include('../partials/header', { title: 'Editar incidència' }) %>

<h1>Editar incidència</h1>
<form action="/incidencies/<%= incidencia.id_incidencia %>/update" method="POST">
  <div class="mb-3">
    <label for="id_usuari" class="form-label">ID Usuari</label>
    <input type="number" name="id_usuari" value="<%= incidencia.id_usuari %>" class="form-control" required />
  </div>
  <div class="mb-3">
    <label for="id_tipus" class="form-label">ID Tipus</label>
    <input type="number" name="id_tipus" value="<%= incidencia.id_tipus %>" class="form-control" required />
  </div>
  <div class="mb-3">
    <label for="descripcio" class="form-label">Descripció</label>
    <textarea name="descripcio" class="form-control" required><%= incidencia.descripcio %></textarea>
  </div>
  <div class="mb-3">
    <label for="datetime_creada" class="form-label">Data i hora de creació</label>
    <input type="datetime-local" name="datetime_creada" value="<%= incidencia.datetime_creada.toISOString().slice(0, 16) %>" class="form-control" required />
  </div>
  <div class="mb-3">
    <label for="ubicacio" class="form-label">Ubicació</label>
    <input type="text" name="ubicacio" value="<%= incidencia.ubicacio %>" class="form-control" required />
  </div>
  <div class="mb-3">
    <label for="estat" class="form-label">Estat</label>
    <select name="estat" class="form-control" required>
      <option <%= incidencia.estat === 'Oberta' ? 'selected' : '' %> value="Oberta">Oberta</option>
      <option <%= incidencia.estat === 'En procès' ? 'selected' : '' %> value="En procès">En procès</option>
      <option <%= incidencia.estat === 'Tancada' ? 'selected' : '' %> value="Tancada">Tancada</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="prioritat" class="form-label">Prioritat</label>
    <select name="prioritat" class="form-control" required>
      <option <%= incidencia.prioritat === 'Baixa' ? 'selected' : '' %> value="Baixa">Baixa</option>
      <option <%= incidencia.prioritat === 'Mitjana' ? 'selected' : '' %> value="Mitjana">Mitjana</option>
      <option <%= incidencia.prioritat === 'Alta' ? 'selected' : '' %> value="Alta">Alta</option>
      <option <%= incidencia.prioritat === 'Critica' ? 'selected' : '' %> value="Critica">Critica</option>
    </select>
  </div>
  <button type="submit" class="btn btn-primary">Actualitzar</button>
</form>

<%- include('../partials/footer') %>

  