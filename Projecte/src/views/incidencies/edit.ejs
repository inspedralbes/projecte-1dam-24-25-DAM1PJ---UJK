<%- include('../partials/header', { title: 'Editar incidència' }) %>

<div class="container mt-5">  
  <div class="card shadow"> 
    <div class="card-header bg-dark text-white"> 
      <h4 class="mb-0">Editar Incidència</h4> 
    </div>
    <div class="card-body"> 
      <form action="/incidencies/<%= incidencia.id_incidencia %>/update" method="POST">

        <!-- Ocultamos id_usuari (ya no editable ni visible) -->
        <input type="hidden" name="id_usuari" value="<%= incidencia.id_usuari %>">

        <!-- Ocultamos id_tipus -->
        <input type="hidden" name="id_tipus" value="<%= incidencia.id_tipus %>">

        <!-- Descripció (editable) -->
        <div class="mb-3">
          <label for="descripcio" class="form-label">Descripció</label>
          <textarea name="descripcio" id="descripcio" class="form-control" rows="4" required><%= incidencia.descripcio %></textarea> 
        </div>

        <!-- Data creació oculta -->
        <input type="hidden" name="datetime_creada" value="<%= incidencia.datetime_creada.toISOString().slice(0, 16) %>">

        <!-- Ubicació oculta -->
        <input type="hidden" name="ubicacio" value="<%= incidencia.ubicacio %>">

        <!-- Estat ocult -->
        <input type="hidden" name="estat" value="<%= incidencia.estat %>">

        <!-- Prioritat oculta -->
        <input type="hidden" name="prioritat" value="<%= incidencia.prioritat %>">

        <!-- Botó -->
        <div class="d-grid"> 
          <button type="submit" class="btn btn-success"> 
            <i class="bi bi-save me-2"></i> Actualitzar Descripció
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
