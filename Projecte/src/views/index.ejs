<!-- src/views/index.ejs -->
<%- include('partials/header', { title: 'Inici' }) %>

<div class="container py-5">
  <h1 class="mb-4">Benvingut al Sistema de Gestió d'Incidències</h1>
  <p class="lead">Aquí podràs veure el nostre projecte, sobre crear un sistema de gestió d'incidències per el nostre institut. Podràs crear una incidència, veure un llistat d'aquesta i si ets un tècnic o un admin, podràs registrar una actuació i assignar una incidencia a un tècnic.</p>
  <div class="mt-4">
    <p class="lead">Des d'aquí pots:</p>
    <div class="d-grid gap-3 d-md-block">
      <a href="/incidencies/new" class="btn btn-primary me-2 mb-2">Crear incidència (Usuari)</a>
      <a href="/incidencies" class="btn btn-secondary me-2 mb-2">Llistat d'incidències (Usuari)</a>
      <a href="/actuacions/create" class="btn btn-success me-2 mb-2">Crear actuació (Tècnic)</a> <%# Ruta de F1, estilo de F1/F2 %>
      <a href="/actuacions" class="btn btn-info me-2 mb-2">Llistat d'actuacions (Tècnic/Admin)</a> <%# Botón de F2, se le asigna btn-info para diferenciarlo %>
      <a href="/admin/gestionar-incidencies" class="btn btn-warning mb-2">Assignar/Editar incidència (Tècnic/Admin)</a> <%# Botón de F1. ATENCIÓ: El '1' en la URL és hardcodejat. Revisar si aquesta ruta és correcta i generalitzable. %>
    </div>
  </div>

  <%# Bloque de Admin de F1 %>
  <% if (typeof user !== 'undefined' && user && user.rol === 'administrador') { %> <%# Asume que tienes user en locals y user.rol %>
    <div class="admin-actions mt-4">
        <h5 class="mb-3">Accions d'Administrador:</h5>
        <div class="list-group">
          <a href="/admin/logs" class="list-group-item list-group-item-action">Veure Logs d'Accés</a>
          <a href="/admin/logs/stats" class="list-group-item list-group-item-action">Veure Estadístiques de Logs</a>
        </div>
    </div>
  <% } %>

<% if (typeof user !== 'undefined' && user && (user.rol === 'Tècnic' || user.rol === 'Professor/a' || user.rol === 'administrador')) { %>
  <a href="/admin/gestionar-incidencies" class="btn btn-warning mb-2">Assignar/Editar incidència (Tècnic/Admin)</a>
<% } %>

  <div class="alert alert-info mt-5"> <%# Ajustado el margen superior para separar del bloque admin si aparece %>
    Si tens qualsevol dubte, posa't en contacte amb l'equip tècnic.
  </div>
</div>

<%- include('partials/footer') %>